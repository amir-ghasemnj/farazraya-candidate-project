## FarazRaya Candidate Project

---

### Abstraction

The goal of this project is implementing an API for temporary hotel room reservation with below assignments in short:

---

### Assignments

- using laravel framework.
- create a seeder for inserting fake rooms with random capacity.
- simple login for a static user with default credentials: `test@example.com` as username and `12345678` as password.
- user can reserve with sending `room_id` and `capacity`.
- prevent overselling.
- simple api route for showing rooms with capacities.
- each reservation is valid for only 2 minutes, after which it is automatically canceled and the capacity is released.

also the complete assignments available in `/docs/assignments.docx`.

---

### Run

1. after cloning project, run `composer install --ignore-platform-reqs` to install all prerequisite packages.
2. copy `.env.example` to `.env`.
3. run `php artisan key:generate` to creating app key.
4. run `php artisan migrate --seed` to creating database/tables and inserting fake data.
5. import postman collection from `/docs/*.postman_collection.json`. this collection provided by some examples to help
   you makes better interaction.
6. run `php artisan serve` for serving project on laravel default port: `8000`
7. run `php artisan schedule:work` in new terminal tab for create a worker instance to handle `ReleaseExpiredReserves`
   job every 30sec.

---

### Test

Before running tests, create a database with any name you like, and then set its connection in the `/phpunit.xml` file.
then run `php artisan test` to testing the project.

---

### Response Structure

the common structure for any response of api routes:

```json
{
  "code": 200,
  "status": 200,
  "message": "You are logged in successfully.",
  "payload": "2|y9zPF9vts8XnhwjCNA8rE1u3YAf78gdwuqVHbKgn5364a6b2"
}
```

`code`: a traceable identifier for all handled logical errors in the logic layer, as well as additional logical codes
generated by the logic layer (e.g. `10000`, `12000`). Please see `/app/lang/errors.php` for more detailed and
understandable information.

`status`: corresponds to the HTTP status code in the response header (e.g., 422, 403, 200, ...).

`message`: a meaningful message. for `200` responses may be `null`.

`payload`: the data returned by the API, which varies depending on the route. In case of a `ValidationException`, it
contains the data of the fields that failed validation.

an example for logic errors:

```json
{
  "code": 100000,
  "status": 403,
  "message": "maybe email/password was incorrect.",
  "payload": null
}
```